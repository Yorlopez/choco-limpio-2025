<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- FAVICONS -->
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='img/favicon.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='img/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='img/favicon-16x16.png') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='img/apple-touch-icon.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='img/site.webmanifest') }}">
    <title>Chocó Limpio | Reciclaje Fluvial Premium 2025</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <link rel="stylesheet" href="/static/css/index.css">
</head>
<body>

    <div id="particles-js"></div>

    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="#"><i class="bi bi-droplet-fill"></i> Chocó Limpio</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#inicio">Inicio</a></li>
                    <li class="nav-item"><a class="nav-link" href="#servicios">Servicios</a></li>
                    <li class="nav-item"><a class="nav-link" href="#como">Cómo</a></li>
                    <li class="nav-item"><a class="nav-link" href="#contacto">Contacto</a></li>
                    <li class="nav-item"><button id="themeToggle" class="btn btn-outline-light ms-3"><i class="bi bi-sun-fill"></i></button></li>
                    <li class="nav-item"><button class="btn btn-outline-light ms-2" data-bs-toggle="modal" data-bs-target="#loginModal"><i class="bi bi-person"></i> Iniciar</button></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- HERO -->
    <section id="inicio" class="hero d-flex align-items-center">
        <video autoplay muted loop playsinline id="heroVideo">
            <source src="{{ url_for('static', filename='assets/video-rio.mp4') }}" type="video/mp4">
        </video>
        <div class="container text-center" data-aos="fade-up">
            <h1>Reciclamos el Río, Salvamos el Futuro</h1>
            <p class="lead">Lanchas premium, pago en minutos, impacto real. Tú reciclas, el Chocó brilla.</p>
            <button class="btn btn-premium btn-lg mt-4" data-bs-toggle="modal" data-bs-target="#registerModal">
                Únete al Cambio <i class="bi bi-arrow-right ms-2"></i>
            </button>
        </div>
    </section>

    <!-- SERVICIOS -->
    <section id="servicios">
        <div class="container">
            <div class="text-center mb-5" data-aos="fade-up">
                <h2 class="display-5">Servicios Premium Fluvial</h2>
                <p class="lead">Tecnología de punta para el Chocó real</p>
            </div>
            <div class="row g-4">
                <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
                    <div class="card-premium text-center p-4 h-100">
                        <div class="icon"><i class="bi bi-truck"></i></div>
                        <h5>Lanchas GPS</h5>
                        <p>Rutas en vivo, notificaciones por WhatsApp, llegada en <strong>15 min</strong>.</p>
                    </div>
                </div>
                <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
                    <div class="card-premium text-center p-4 h-100">
                        <div class="icon"><i class="bi bi-phone-vibrate"></i></div>
                        <h5>Minutos Premium</h5>
                        <p>1 kg = 15 min. Recargas al instante. <strong>¡Sin saldo, sin problema!</strong></p>
                    </div>
                </div>
                <div class="col-md-4" data-aos="fade-up" data-aos-delay="300">
                    <div class="card-premium text-center p-4 h-100">
                        <div class="icon"><i class="bi bi-shield-check"></i></div>
                        <h5>Certificado INVEMAR</h5>
                        <p>Impacto medible: <strong>1 kg = 1 árbol plantado</strong> en el Atrato.</p>
                    </div>
                </div>
                <div class="col-md-4" data-aos="fade-up" data-aos-delay="400">
                    <div class="card-premium text-center p-4 h-100">
                        <div class="icon"><i class="bi bi-currency-exchange"></i></div>
                        <h5>Pago en Efectivo</h5>
                        <p>Opción para quienes no usan minutos. <strong>$1.500 por kg</strong>.</p>
                    </div>
                </div>
                <div class="col-md-4" data-aos="fade-up" data-aos-delay="500">
                    <div class="card-premium text-center p-4 h-100">
                        <div class="icon"><i class="bi bi-people"></i></div>
                        <h5>Comunidad Activa</h5>
                        <p>Grupos de WhatsApp por barrio. <strong>¡Gana bonos por referidos!</strong></p>
                    </div>
                </div>
                <div class="col-md-4" data-aos="fade-up" data-aos-delay="600">
                    <div class="card-premium text-center p-4 h-100">
                        <div class="icon"><i class="bi bi-trophy"></i></div>
                        <h5>Ranking Mensual</h5>
                        <p>Top 10 recicladores ganan <strong>1 hora de internet gratis</strong>.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CÓMO FUNCIONA -->
    <section id="como">
        <div class="container">
            <div class="text-center mb-5" data-aos="fade-up">
                <h2 class="display-5">¿Cómo Funciona?</h2>
                <p class="lead">5 pasos simples para cambiar el río</p>
            </div>
            <div class="timeline" data-aos="fade-up">
                <div class="timeline-item">
                    <div class="timeline-icon"><i class="bi bi-1-circle-fill"></i></div>
                    <div class="timeline-content">
                        <h5>Separa en casa</h5>
                        <p>Plástico, vidrio, metal y orgánicos en bolsas diferentes.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-icon"><i class="bi bi-2-circle-fill"></i></div>
                    <div class="timeline-content">
                        <h5>Pesa y fotografía</h5>
                        <p>Usa tu celular. 1 foto = 1 reporte.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-icon"><i class="bi bi-3-circle-fill"></i></div>
                    <div class="timeline-content">
                        <h5>Envía por WhatsApp</h5>
                        <p>Manda foto + peso al <strong>312 456 7890</strong>.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-icon"><i class="bi bi-4-circle-fill"></i></div>
                    <div class="timeline-content">
                        <h5>Lancha GPS llega</h5>
                        <p>Notificación en vivo. <strong>ETA exacta</strong>.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-icon"><i class="bi bi-5-circle-fill"></i></div>
                    <div class="timeline-content">
                        <h5>¡Gana al instante!</h5>
                        <p>Minutos en tu celular o efectivo. <strong>¡Tú eliges!</strong></p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CONTACTO -->
    <section id="contacto">
        <div class="container">
            <div class="row">
                <div class="col-lg-6" data-aos="fade-right">
                    <h2 class="display-5 mb-4">Contáctanos</h2>
                    <form>
                        <div class="mb-3">
                            <input type="text" class="form-control form-control-lg" placeholder="Tu nombre" required>
                        </div>
                        <div class="mb-3">
                            <input type="tel" class="form-control form-control-lg" placeholder="312 456 7890" required>
                        </div>
                        <div class="mb-3">
                            <textarea class="form-control form-control-lg" rows="4" placeholder="Tu mensaje"></textarea>
                        </div>
                        <button type="submit" class="btn btn-light btn-lg w-100">Enviar Mensaje</button>
                    </form>
                    <div class="mt-4">
                        <p><strong>Horarios:</strong> Lunes a Sábado 6:00 AM - 6:00 PM</p>
                        <p><fl><strong>WhatsApp:</strong> <a href="https://wa.me/573137527364" class="text-white">313 752 7364</a></p>
                        <p><strong>Correo:</strong> mosqueralopezyoryani@gmail.com</p>
                    </div>
                </div>
                <div class="col-lg-6" data-aos="fade-left">
                    <div id="map"></div>
                    <div class="mt-3 text-center">
                        <small class="text-white-50">Punto de recolección principal: Muelle Turístico, Quibdó</small>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="py-5 text-white" style="background: linear-gradient(135deg, var(--azul-pacifico), var(--verde-rio));">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>Chocó Limpio Premium 2025</h5>
                    <p>Reciclaje fluvial con tecnología de punta. Por el río, para la gente.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p><strong>Conéctate:</strong></p>
                    <a href="#" class="text-white me-3"><i class="bi bi-whatsapp fs-3"></i></a>
                    <a href="#" class="text-white me-3"><i class="bi bi-instagram fs-3"></i></a>
                    <a href="#" class="text-white"><i class="bi bi-facebook fs-3"></i></a>
                </div>
            </div>
            <hr class="bg-white opacity-20">
            <div class="text-center">
                <small>© 2025 Chocó Limpio. Hecho con orgullo en Quibdó, Chocó.</small>
            </div>
        </div>
    </footer>

    <!-- MODAL LOGIN (CORREGIDO) -->
    <div class="modal fade" id="loginModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Iniciar Sesión</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-4">
                    <form id="loginForm">
                        <div class="mb-3">
                            <label class="form-label">Teléfono, nombre o correo</label>
                            <input type="text" id="loginIdentificador" class="form-control" placeholder="3124567890" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Contraseña</label>
                            <input type="password" id="loginContraseña" class="form-control" placeholder="Mínimo 6 caracteres" required>
                        </div>
                        <button type="submit" class="btn btn-premium w-100">Entrar</button>
                    </form>
                    <div id="loginError" class="text-danger text-center mt-3 fw-bold" style="display:none;"></div>
                    <div class="text-center mt-3">
                        <a href="#" data-bs-toggle="modal" data-bs-target="#recuperarModal" data-bs-dismiss="modal">¿Olvidaste tu contraseña?</a>
                    </div>
                    {% if config.DEBUG %}
                    <div class="alert alert-info mt-4">
                        <small>
                            <strong>Acceso Lanchero (Prueba):</strong><br>
                            Correo: <code>yanimosquerayor@gmail.com</code><br>
                            Contraseña: <code>123456</code>
                        </small>
                        <hr class="my-2 border-secondary">
                        <small>
                            <strong>Acceso Usuario (Prueba):</strong><br>
                            Correo: <code>mosqueralopezyoryani@gmail.com</code><br>
                            Contraseña: <code>123456</code>
                        </small>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL REGISTRO (CORREGIDO 100%) -->
    <div class="modal fade" id="registerModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Crear Cuenta</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-4">
                    <form id="registerForm">
                        <div class="mb-3">
                            <label class="form-label">Nombre completo</label>
                            <input type="text" id="regNombre" class="form-control" placeholder="Juan Pérez" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Teléfono (WhatsApp)</label>
                            <input type="tel" id="regTelefono" class="form-control" placeholder="3124567890" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Correo electrónico</label>
                            <input type="email" id="regEmail" class="form-control" placeholder="juan@gmail.com" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Barrio / Vereda</label>
                            <input type="text" id="regBarrio" class="form-control" placeholder="ej: La Yesquita" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Fecha de Nacimiento</label>
                            <input type="date" id="regFechaNac" class="form-control" required max="{{ now().strftime('%Y-%m-%d') }}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Crea una contraseña</label>
                            <input type="password" id="regContraseña" class="form-control" placeholder="Mínimo 6 caracteres" required minlength="6">
                        </div>
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="regComoLanchero">
                            <label class="form-check-label" for="regComoLanchero">
                                Registrarme como lanchero
                            </label>
                        </div>
                        <button type="submit" class="btn btn-premium w-100">Crear cuenta</button>
                    </form>
                    <div id="registerError" class="text-danger text-center mt-3 fw-bold" style="display:none;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL RECUPERAR (CORREGIDO) -->
    <div class="modal fade" id="recuperarModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-warning text-dark">
                    <h5 class="modal-title">Recuperar Contraseña</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-4">
                    <form id="recuperarForm">
                        <p class="text-white-50 mb-3">Ingresa tu correo electrónico y te enviaremos un enlace para restablecer tu contraseña.</p>
                        <div class="mb-3">
                            <label class="form-label">Correo electrónico registrado</label>
                            <input type="email" class="form-control" id="recuperarEmail" placeholder="tu@correo.com" required>
                        </div>
                        <button type="submit" class="btn btn-premium w-100">Enviar enlace</button>
                    </form>
                    <div id="pasoPregunta" style="display: none;">
                        <hr>
                        <p><strong>Pregunta de seguridad:</strong></p>
                        <p id="preguntaTexto" class="fw-bold"></p>
                        <div class="mb-3">
                            <input type="text" class="form-control" id="respuestaInput" placeholder="Tu respuesta" required>
                        </div>
                        <button class="btn btn-success w-100" onclick="verificarRespuesta()">Verificar</button>
                    </div>
                    <div id="pasoNuevaContra" style="display: none;">
                        <hr>
                        <p><strong>Crea una nueva contraseña</strong></p>
                        <div class="mb-3">
                            <input type="password" class="form-control" id="nuevaContra" placeholder="Mínimo 6 caracteres" required>
                        </div>
                        <div class="mb-3">
                            <input type="password" class="form-control" id="confirmarContra" placeholder="Repite la contraseña" required>
                        </div>
                        <button class="btn btn-premium w-100" onclick="cambiarContraseña()">Cambiar Contraseña</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="/static/js/index.js"></script>
</body>
</html>