<!DOCTYPE html>
<html lang="es" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- FAVICONS -->
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='img/favicon.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='img/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='img/favicon-16x16.png') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='img/apple-touch-icon.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='img/site.webmanifest') }}">
    <title>Panel del Lanchero | Chocó Limpio</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/static/css/lanchero.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="/lanchero">
                <i class="bi bi-water"></i> Panel del Lanchero
            </a>
            <span class="navbar-text">
                Reportes Pendientes: <span id="contadorReportes" class="badge bg-warning text-dark">0</span>
            </span>
            <a href="/logout" class="btn btn-outline-danger btn-sm"><i class="bi bi-box-arrow-right"></i> Salir</a>
        </div>
    </nav>

    <div class="container" style="padding-top: 80px;">
        <header class="text-center my-4">
            <h1>Recolecciones Pendientes</h1>
            <p class="lead">Estos son los reportes que necesitan ser recogidos.</p>
        </header>

        <div id="spinner" class="text-center mt-5">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Buscando reportes...</span>
            </div>
            <p>Buscando reportes...</p>
        </div>

        <div id="no-reportes" class="alert alert-success text-center" style="display: none;">
            <i class="bi bi-check-circle-fill fs-3"></i>
            <h4 class="alert-heading">¡Todo al día!</h4>
            <p>No hay reportes pendientes por recoger.</p>
        </div>

        <div id="lista-reportes" class="row g-4">
            <!-- Las tarjetas de reporte se insertarán aquí dinámicamente -->
        </div>
    </div>

    <!-- Plantilla para las tarjetas de reporte -->
    <template id="reporte-template">
        <div class="col-md-6 col-lg-4">
            <div class="card reporte-card">
                <img src="" class="card-img-top reporte-imagen" alt="Foto del reciclaje">
                <div class="card-body">
                    <h5 class="card-title"><span class="fw-bold reporte-kg"></span> kg</h5>
                    <p class="card-text reporte-ubicacion"></p>
                    <div class="card-footer bg-transparent border-top-0">
                        <small class="text-white-50">
                            <i class="bi bi-person-circle"></i> <span class="reporte-usuario"></span><br>
                            <i class="bi bi-geo-alt-fill"></i> <span class="reporte-barrio"></span>
                        </small>
                        <button class="btn btn-success w-100 mt-3 btn-recoger">
                            <i class="bi bi-check-lg"></i> Marcar como Recogido
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <script src="/static/js/lanchero.js"></script>

    <!-- MODAL PARA VER IMAGEN AMPLIADA -->
    <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content bg-dark border-secondary">
                <div class="modal-header border-0">
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center p-2">
                    <img src="" id="modalImage" class="img-fluid rounded" alt="Imagen del reporte ampliada">
                </div>
            </div>
        </div>
    </div>
</body>
</html>